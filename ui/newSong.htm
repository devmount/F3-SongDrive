<div class="wrapper style2">
	<section class="container">
		<h3>Create a Song</h3>

		<check if="{{ isset(@message) }}">
			<p class="message">{{ @message }}</p>
		</check>

		<form action="{{ @BASE }}/song/add" method="post">

			<select name="lang" required title="language">
				<option value="" {{ @POST.lang ? '' : 'selected'}} style="display: none;color:green;" class="formerize-placeholder">Choose language</option>
				<repeat group="{{ @languages }}" key="{{ @key }}" value="{{ @label }}">
					<option value="{{ @key }}" {{ @key==@POST.lang ? 'selected' : ''}} >{{ @label }}</option>
				</repeat>
			</select>
			<input type="text" name="title" placeholder="add title" value="{{ @POST.title }}" required title="title" />
			<input type="text" name="subtitle" placeholder="add subtitle" value="{{ @POST.subtitle }}" title="subtitle" />
			<input name="authorstext" id="authorstext" value="{{ @POST.authorstext }}">
			<input name="authorsmusic" id="authorsmusic" value="{{ @POST.authorsmusic }}" >
			<input type="number" name="year" max="{{ @currentyear }}" placeholder="add year" value="{{ @POST.year }}" title="year" />
			<input type="text" name="tuning" placeholder="add tuning" value="{{ @POST.tuning }}" title="tuning" />
			<textarea class="autoexpand" name="publisher" cols="30" rows="2" data-min-rows="2" placeholder="add publisher" title="publisher">{{ @POST.publisher }}</textarea>
			<textarea class="mono autoexpand" name="content" cols="30" rows="2" data-min-rows="2" placeholder="add song content" required title="song content">{{ @POST.content }}</textarea>
			<input type="submit" value="Create">
		</form>
	</section>
</div>

<link rel="stylesheet" href="http://aehlke.github.io/tag-it/css/jquery.tagit.css" type="text/css" />
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script src="http://aehlke.github.io/tag-it/js/tag-it.js"></script>
<script>
$(document).ready(function () {
    $("#authorstext").tagit({
    	fieldName: "authorstext",
        availableTags: {{ @authors }},
        autocomplete: {delay: 0, minLength: 1},
        allowSpaces: true,
        placeholderText: "add text authors"
    });
});
$(document).ready(function () {
    $("#authorsmusic").tagit({
    	fieldName: "authorsmusic",
        availableTags: {{ @authors }},
        autocomplete: {delay: 0, minLength: 1},
        allowSpaces: true,
        placeholderText: "add music authors"
    });
});
$('.autoexpand').keyup(function (e) {
    var rows = $(this).val().split("\n");
    $(this).prop('rows', rows.length +1);
});
</script>